# 株式会社リンクス - Mobirio（モビリオ）開発標準ルール

## 1. プロジェクト概要
- **サービス名**: Mobirio（モビリオ）
- **コンセプト**: 「広がる、新しい移動のカタチ」をテーマに、大型バイクから特定小型原付（電動キックボード等）までを扱う地域密着型レンタルバイクプラットフォーム
- **主なターゲット**: 
  - 免許はあるがバイクを所有していない「潜在ライダー」
  - 購入前の試乗ニーズ、観光地の散策、ビジネス（フードデリバリー）利用
- **主要機能**: Square OAuth連携、時間/日単位の予約システム、決済機能、マルチベンダー管理

## 2. 技術スタック（リンクス推奨構成）
- **Framework**: Next.js 16 (App Router, Turbopack) 
- **Language**: TypeScript (Strict Mode) 
- **Styling**: Tailwind CSS v3.4 (標準方式)
  - `tailwind.config.ts` でカラーとフォントを一括管理すること
- **Animation**: Framer Motion (スクロールトリガー、フェードイン: `initial={{ opacity: 0, y: 30 }}`) 
- **Database/Auth**: Supabase (RLSによる厳格なデータ保護、重複チェックロジック)
- **Payment/OAuth**: Square API (各ベンダーとのOAuth連携、Web Payments SDK)

## 3. デザイン・余白ルール（リンクス標準仕様）
### 余白設計
- **セクション間**: デスクトップ `py-[100px]` / モバイル `py-[50px]`
- **タイトル下**: 基本 `mb-[30px]` / サービス紹介等 `mb-[50px]` 
- **コンテナ最大幅**: `max-w-[1200px]`
- **左右余白**: デスクトップ `px-[50px]` / モバイル `px-[30px]`

### タイポグラフィ
- **見出し (H1, H2)**: `font-serif` (Noto Serif JP), `font-light`
- **本文**: `font-sans` (Inter, Noto Sans JP), `leading-relaxed`
- **H2サイズ**: `text-3xl md:text-4xl`

### コンポーネント装飾 
- **ボタン (標準)**: `px-[30px] py-[15px]`, `rounded-full` 
- **カード**: `p-[20px] md:p-[30px]`, `rounded-3xl`, `shadow-lg` 

## 4. 予約・ビジネスロジック

### 4.1 予約単位と料金体系
- **予約単位**: 「時間単位（2h/4h）」と「日単位（1day/24h/1泊2日〜）」のトグル切り替え
- **料金計算**: 以下の料金表に基づき、リアルタイムで合計金額を算出すること

#### レンタル基本料金（税込）
| クラス | 2h | 4h | 1day(当日) | 24h | 1泊2日(32h) | 超過1h | 追加24h |
|--------|-----|-----|-----------|------|------------|--------|---------|
| 特定EV | 1,500 | 2,500 | 3,000 | 3,500 | 4,200 | 850 | 2,500 |
| 50cc | 2,000 | 3,000 | 3,500 | 4,000 | 5,050 | 1,000 | 2,800 |
| 125cc | 3,000 | 4,200 | 5,000 | 6,000 | 8,000 | 1,200 | 4,300 |
| 250cc | - | 8,300 | 9,300 | 11,200 | 16,500 | 1,600 | 8,500 |
| 400cc | - | 9,800 | 10,900 | 13,200 | 20,600 | 1,800 | 10,000 |
| 950cc | - | 12,800 | 14,200 | 17,200 | 24,600 | 2,150 | 12,000 |
| 1100cc | - | 14,000 | 15,600 | 18,900 | 26,900 | 2,300 | 13,500 |
| 1500cc | - | 17,500 | 19,500 | 23,700 | 31,700 | 3,000 | 17,000 |

### 4.2 保険・補償オプション
- **対人・対物**: 無制限（対物免責 5万円）
- **搭乗者傷害**: 500万円
- **CDW（車両免責補償）**: 1,000円〜3,000円/日。事故時の自己負担（免責金）を免除
- **NOC（休車補償）**: 自走可能時 2万円〜、不能時 5万円〜（請求上限15日分）

### 4.3 データ不整合防止
- **重複チェック**: 予約確定前にSupabase側で同一車両のスケジュール重複を検証すること
- **マルチベンダー管理**: 各加盟店がSquare経由で自身の売上を受け取れるよう、OAuthによる紐付けを行うこと

## 5. セキュリティ・環境変数ルール
- **接頭辞の厳守**:
  - `NEXT_PUBLIC_`: ブラウザに公開して良いもの（Square App ID等）
  - 接頭辞なし: サーバー専用の機密情報（Square Secret, Supabase Service Role Key等）
- **厳禁**: `NEXT_PUBLIC_SQUARE_APPLICATION_SECRET` のように、機密情報に公開接頭辞を付けることは絶対に禁止する

## 6. サイト構成・ページ要件
リンクス標準デザインルール（セクション間余白 100px 等）を適用して構築する

1. **HOME**: ヒーローセクション（Mobirioの世界観）、車両検索（日時・場所）、サービスの特徴
2. **車両一覧・詳細**: 検索結果、車両スペック、予約ボタン
3. **料金・補償**: クラス別料金表、保険内容（対人・対物無制限）、車両免責補償制度（CDW）の解説
4. **ご利用ガイド**: 予約、来店手続き、返却までのフロー
5. **加盟店募集（BtoB）**: 店舗オーナー向け収益モデル、低コスト参入メリットの訴求

## 7. AI検索最適化（GEO/LLMO）
- **構造化データ (JSON-LD)**: 各ページに `LocalBusiness`, `Service`, `BreadcrumbList` を実装すること
- **地域キーワード**: 「宮崎」「宮崎市」「レンタルバイク」「電動キックボード」「ツーリング」をメタデータに含めること
- **Semantic HTML**: AIボットが文脈を理解できるよう、適切なHTMLタグ（main, section, article）を選択すること

## 8. デザイン定数（Tailwind設定）
- **Primary Color**: `#004A99` (リンクスブルー)
- **Accent Color**: `#ff6b35` (アクティブオレンジ)
- **Spacing**:
  - Section: `100px` (desktop) / `50px` (mobile)
  - Button: `px-[30px] py-[15px]`
- **Font**: `Noto Serif JP` (Heading), `Inter / Noto Sans JP` (Body)

## 9. 実装ガイドライン
- **画像最適化**: `next/image` を必須使用し、`width/height` を明示すること 
- **LCP対策**: ファーストビューの画像には `priority` 属性を付与すること 
- **Server Components**: データの取得や秘密情報の処理は Server Components または Server Actions で行うこと
- **エラーハンドリング**: WordPress APIや外部API連携時は、`null` を返却してサイトのクラッシュを防ぐこと

## 10. AI相談プロセス
- **重要**: 大幅な技術構成の変更やパッケージの追加を行う前に、必ず技術的リスクを評価し、必要に応じて Gemini 等にセカンドオピニオンを求めること

